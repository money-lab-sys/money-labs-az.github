<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>JETWIN | ELITE CLUB</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;800;900&family=Rajdhani:wght@600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- GLOBAL STYLES --- */
        :root {
            --gold: #FFD700;
            --blue: #00f2ff;
            --green: #00ff66;
            --red: #ff0033;
            --dark: #050505;
            --panel: #111;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; user-select: none; }
        
        body {
            margin: 0; padding: 0; background: var(--dark); color: white;
            font-family: 'Montserrat', sans-serif; height: 100vh; overflow: hidden;
            display: flex; flex-direction: column;
        }

        /* --- 1. INTRO LAYER (REGISTRATION) --- */
        #introLayer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(135deg, #000 0%, #111 100%);
            z-index: 9999; display: flex; flex-direction: column;
            justify-content: center; align-items: center; padding: 20px;
        }

        .bg-anim {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background-image: radial-gradient(rgba(255,255,255,0.1) 1px, transparent 1px);
            background-size: 30px 30px; opacity: 0.3; z-index: -1;
        }

        .intro-ticker-box {
            position: absolute; top: 40px; width: 100%; overflow: hidden;
            background: rgba(255, 215, 0, 0.1); border-top: 1px solid var(--gold); border-bottom: 1px solid var(--gold);
            padding: 10px 0; transform: rotate(-2deg);
        }
        .intro-ticker {
            white-space: nowrap; animation: scroll 15s linear infinite;
            font-family: 'Rajdhani', sans-serif; font-size: 18px; color: var(--gold); font-weight: bold;
        }

        .login-card {
            background: rgba(20, 20, 20, 0.9); border: 1px solid #333;
            padding: 30px; border-radius: 20px; width: 100%; max-width: 400px;
            text-align: center; box-shadow: 0 0 50px rgba(0,0,0,0.5);
            backdrop-filter: blur(10px); z-index: 10;
        }

        .login-logo { font-size: 30px; font-weight: 900; color: white; margin-bottom: 10px; letter-spacing: 2px; }
        .login-sub { font-size: 12px; color: #888; margin-bottom: 25px; line-height: 1.5; }

        .inp-group { text-align: left; margin-bottom: 15px; }
        .inp-label { font-size: 10px; color: var(--blue); margin-bottom: 5px; display: block; font-weight: bold; text-transform: uppercase; }
        .inp {
            width: 100%; padding: 15px; background: #000; border: 1px solid #333;
            color: white; border-radius: 10px; font-family: 'Montserrat'; font-size: 14px;
            transition: 0.3s;
        }
        .inp:focus { border-color: var(--blue); box-shadow: 0 0 15px rgba(0, 242, 255, 0.2); outline: none; }

        .btn-join {
            width: 100%; padding: 18px; background: linear-gradient(45deg, var(--blue), #0066ff);
            border: none; border-radius: 12px; color: black; font-weight: 900; font-size: 16px;
            text-transform: uppercase; cursor: pointer; margin-top: 10px;
            box-shadow: 0 5px 20px rgba(0, 242, 255, 0.3); transition: transform 0.2s;
        }
        .btn-join:active { transform: scale(0.98); }

        /* --- 2. MAIN APP UI --- */
        #appLayer { display: none; flex-direction: column; height: 100%; width: 100%; }

        .header {
            height: 65px; background: #080808; border-bottom: 1px solid #222;
            display: flex; justify-content: space-between; align-items: center; padding: 0 20px;
        }
        .user-info { text-align: right; line-height: 1.2; }
        .user-name { color: var(--gold); font-weight: bold; font-size: 14px; }
        .user-id { color: #555; font-size: 10px; }

        .live-count {
            position: absolute; top: 75px; left: 20px; z-index: 20;
            background: rgba(0,0,0,0.5); padding: 5px 10px; border-radius: 15px;
            font-size: 10px; color: #00ff66; border: 1px solid #00ff66;
            display: flex; align-items: center; gap: 5px;
        }
        .live-dot { width: 6px; height: 6px; background: #00ff66; border-radius: 50%; animation: blink 2s infinite; }
        @keyframes blink { 0% {opacity:1;} 50% {opacity:0.3;} 100% {opacity:1;} }

        .stage { flex: 1; position: relative; overflow: hidden; background: radial-gradient(circle at bottom, #1a233a 0%, #000 100%); }
        canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }

        .multiplier {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            font-size: 70px; font-weight: 900; color: white;
            text-shadow: 0 0 30px var(--blue); font-family: 'Rajdhani', sans-serif;
        }

        .controls { background: var(--panel); padding: 20px; border-top: 1px solid #222; box-shadow: 0 -10px 30px #000; }
        
        .bet-input-wrap { position: relative; margin-bottom: 15px; }
        .bet-input {
            width: 100%; padding: 15px; background: #050505; border: 1px solid #333;
            color: white; text-align: center; font-size: 24px; font-weight: bold; border-radius: 12px;
        }
        .currency-icon { position: absolute; left: 20px; top: 18px; color: #555; }

        .main-btn {
            width: 100%; height: 60px; border-radius: 14px; border: none;
            font-size: 20px; font-weight: 900; text-transform: uppercase; cursor: pointer;
        }
        .btn-bet { background: linear-gradient(135deg, var(--blue), #2962ff); color: white; }
        .btn-cash { background: linear-gradient(135deg, var(--gold), #ff6f00); color: black; display: none; }

        .nav {
            height: 70px; background: #050505; display: flex; border-top: 1px solid #222;
        }
        .nav-item { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; color: #666; font-size: 10px; gap: 5px; cursor: pointer; transition: 0.2s; }
        .nav-item i { font-size: 18px; }
        .nav-item.active { color: var(--blue); }
        .nav-item:active { transform: scale(0.9); }

        .crashed { color: var(--red) !important; text-shadow: 0 0 30px var(--red) !important; animation: shake 0.4s; }
        .won { color: var(--green) !important; text-shadow: 0 0 30px var(--green) !important; }
        @keyframes shake { 0%, 100% {transform: translate(0,0);} 25% {transform: translate(-5px, 5px);} 75% {transform: translate(5px, -5px);} }
        @keyframes scroll { 0% {transform: translateX(100%);} 100% {transform: translateX(-100%);} }

    </style>
</head>
<body>

    <div id="introLayer">
        <div class="bg-anim"></div>
        <div class="intro-ticker-box">
            <div class="intro-ticker">
                üöÄ ELVIN QAZANDI $500 ‚Ä¢ üí∞ LEYLA M. QAZANDI $1,200 ‚Ä¢ üî• R∆è≈ûAD K. QAZANDI $340 ‚Ä¢ üíé BU G√úN S∆èNƒ∞N G√úN√úND√úR ‚Ä¢ üöÄ
            </div>
        </div>
        <div class="login-card">
            <div class="login-logo">JETWIN <span style="color:var(--blue)">TITANIUM</span></div>
            <p class="login-sub">D√ºnyanƒ±n …ôn s√ºr…ôtli qazanc platformasƒ±na xo≈ü g…ôldiniz.<br>Giri≈ü √º√ß√ºn m…ôlumatlarƒ± doldurun.</p>
            <div class="inp-group"><label class="inp-label">Adƒ±nƒ±z</label><input type="text" id="regName" class="inp" placeholder="M…ôs: Elvin"></div>
            <div class="inp-group"><label class="inp-label">Soyadƒ±nƒ±z</label><input type="text" id="regSurname" class="inp" placeholder="M…ôs: M…ômm…ôdov"></div>
            <div class="inp-group"><label class="inp-label">Gmail</label><input type="email" id="regEmail" class="inp" placeholder="email@gmail.com"></div>
            <button class="btn-join" onclick="registerUser()">QAZANMAƒûA BA≈ûLA ‚ûî</button>
        </div>
    </div>

    <div id="appLayer">
        <div class="header">
            <div style="font-size:20px; font-weight:900;">JETWIN</div>
            <div class="user-info">
                <div class="user-id">ID: <span id="uid">8392</span></div>
                <div class="user-name" id="displayName">Guest</div>
            </div>
        </div>
        <div class="stage" id="stage">
            <div class="live-count"><div class="live-dot"></div> 1,420 Online</div>
            <canvas id="stars"></canvas>
            <canvas id="game"></canvas>
            <div class="multiplier" id="multi">1.00x</div>
            <div style="position:absolute; bottom:20px; width:100%; text-align:center; color:#555; font-size:10px; letter-spacing:1px;">PROVABLY FAIR SYSTEM</div>
        </div>
        <div class="controls">
            <div style="display:flex; justify-content:space-between; color:#888; font-size:12px; margin-bottom:5px;">
                <span>Balans: <b style="color:white;">$<span id="bal">0.00</span></b></span>
                <span>Limit: <b>$21</b></span>
            </div>
            <div class="bet-input-wrap">
                <span class="currency-icon">$</span>
                <input type="number" id="betVal" class="bet-input" value="10">
            </div>
            <button class="main-btn btn-bet" id="btnBet" onclick="play()">M∆èRC ET</button>
            <button class="main-btn btn-cash" id="btnCash" onclick="cashOut()">PULU G√ñT√úR</button>
        </div>
        <div class="nav">
            <div class="nav-item active"><i class="fa-solid fa-gamepad"></i>Oyun</div>
            <div class="nav-item" onclick="openPromo()"><i class="fa-solid fa-ticket"></i>Promo</div>
            <div class="nav-item" onclick="wa('deposit')"><i class="fa-solid fa-wallet"></i>Depozit</div>
            <div class="nav-item" onclick="checkWithdraw()"><i class="fa-solid fa-money-bill-transfer"></i>√áƒ±xarƒ±≈ü</div>
            <div class="nav-item" onclick="wa('support')"><i class="fa-solid fa-headset"></i>D…ôst…ôk</div>
        </div>
    </div>

    <script>
        // --- CONFIG (S∆èNƒ∞N YENƒ∞ Lƒ∞NKƒ∞N) ---
        const API_URL = "https://script.google.com/macros/s/AKfycbxKhaec1LhNpVEddiDzAq7Pf0j7tLWF8MJcY9Yzn0HIyjOr0XxgmRc_GzcyqQD4dX-QVQ/exec"; 
        
        const WA_NUMBER = "994507516137";
        const MIN_WITHDRAW = 21;

        // --- GLOBAL VARIABLES ---
        let balance = 0.00;
        let totalDep = 0.00;
        let isPlaying = false;
        let multi = 1.00;
        let crashPoint = 0;
        let startTime, animFrame;

        // --- 1. REGISTRATION ---
        if(localStorage.getItem('jw_user_fullname')) {
            showApp(localStorage.getItem('jw_user_fullname'));
        }

        function registerUser() {
            let name = document.getElementById('regName').value.trim();
            let surname = document.getElementById('regSurname').value.trim();
            let email = document.getElementById('regEmail').value.trim();

            if(!name || !surname || !email.includes('@')) {
                alert("Z…ôhm…ôt olmasa b√ºt√ºn xanalarƒ± d√ºzg√ºn doldurun.");
                return;
            }

            let fullName = `${name} ${surname}`;
            localStorage.setItem('jw_user_fullname', fullName);
            
            let btn = document.querySelector('.btn-join');
            btn.innerText = "HESAB YARADILIR...";
            btn.style.opacity = "0.7";
            setTimeout(() => { showApp(fullName); }, 1500);
        }

        function showApp(name) {
            document.getElementById('introLayer').style.display = 'none';
            document.getElementById('appLayer').style.display = 'flex';
            document.getElementById('displayName').innerText = name;
            document.getElementById('uid').innerText = Math.floor(Math.random() * 90000) + 10000;
            initGame();
        }

        // --- 2. GAME ENGINE ---
        const cvs = document.getElementById('game');
        const ctx = cvs.getContext('2d');
        let w, h;

        function initGame() {
            resize();
            drawStars();
            runGhost(); 
        }
        function resize() {
            w = cvs.width = document.getElementById('stage').offsetWidth;
            h = cvs.height = document.getElementById('stage').offsetHeight;
        }
        window.addEventListener('resize', resize);

        function runGhost() {
            if(isPlaying) return;
            multi = 1.00;
            let r = Math.random();
            crashPoint = r < 0.3 ? 2.50 : (r < 0.7 ? 8.00 : 30.00); 
            startTime = Date.now();
            ghostLoop();
        }

        function ghostLoop() {
            if(isPlaying) return;
            let t = (Date.now() - startTime) / 1000;
            multi = 1.00 + (t*t*0.1);
            if(multi >= crashPoint) {
                setTimeout(runGhost, 2000); return;
            }
            document.getElementById('multi').innerText = multi.toFixed(2) + "x";
            drawRocket(t, true);
            requestAnimationFrame(ghostLoop);
        }

        function play() {
            let val = parseInt(document.getElementById('betVal').value);
            if(balance < val) return alert("Balans kifay…ôt etmir!");
            
            balance -= val; updateUI();
            
            isPlaying = true;
            multi = 1.00;
            document.getElementById('btnBet').style.display = 'none';
            document.getElementById('btnCash').style.display = 'block';
            document.getElementById('multi').style.color = "white";
            document.getElementById('multi').classList.remove('crashed', 'won');

            let r = Math.random();
            if(val >= 50) crashPoint = 1.00 + Math.random() * 0.15; 
            else if(val >= 20) crashPoint = 1.10 + Math.random() * 0.60; 
            else crashPoint = r < 0.5 ? 2.00 + Math.random()*3 : 1.20 + Math.random()*0.5;

            startTime = Date.now();
            loop();
        }

        function loop() {
            if(!isPlaying) return;
            let t = (Date.now() - startTime) / 1000;
            multi = 1.00 + (t*t*0.08);

            if(multi >= crashPoint) { crash(); return; }

            document.getElementById('multi').innerText = multi.toFixed(2) + "x";
            drawRocket(t, false);
            animFrame = requestAnimationFrame(loop);
        }

        function drawRocket(t, isGhost) {
            ctx.clearRect(0,0,w,h);
            let color = isGhost ? "#555" : "#00f2ff";
            let x = Math.min(w-40, t*90);
            let y = h - Math.min(h-60, (multi-1)*130);
            
            ctx.beginPath(); ctx.lineWidth=5; ctx.strokeStyle=color;
            ctx.moveTo(0, h); ctx.quadraticCurveTo(x/2, h, x, y); ctx.stroke();
            
            if(!isGhost) { ctx.shadowBlur=20; ctx.shadowColor=color; ctx.stroke(); ctx.shadowBlur=0; }
            ctx.font="30px Arial"; ctx.fillText("üöÄ", x-15, y-10);
        }

        function cashOut() {
            if(!isPlaying) return;
            isPlaying = false; cancelAnimationFrame(animFrame);
            let win = parseInt(document.getElementById('betVal').value) * multi;
            balance += win; updateUI();
            
            document.getElementById('multi').classList.add('won');
            document.getElementById('multi').innerText = `+$${win.toFixed(2)}`;
            setTimeout(reset, 2000);
        }

        function crash() {
            isPlaying = false; cancelAnimationFrame(animFrame);
            document.getElementById('multi').innerText = "CRASH";
            document.getElementById('multi').classList.add('crashed');
            ctx.fillStyle = "rgba(255, 0, 51, 0.2)"; ctx.fillRect(0,0,w,h);
            setTimeout(reset, 2000);
        }

        function reset() {
            document.getElementById('btnBet').style.display = 'block';
            document.getElementById('btnCash').style.display = 'none';
            document.getElementById('multi').style.color = "white";
            document.getElementById('multi').classList.remove('crashed', 'won');
            runGhost();
        }

        function updateUI() { document.getElementById('bal').innerText = balance.toFixed(2); }

        // --- PROMO CODE SYSTEM ---
        async function openPromo() {
            let code = prompt("Promo Kodu:");
            if(!code) return;
            try {
                let res = await fetch(`${API_URL}?code=${encodeURIComponent(code)}`);
                let data = await res.json();
                if(data.result === 'success') {
                    let amt = parseFloat(data.amount);
                    balance += amt; 
                    if(code.startsWith("DEP") || code.startsWith("VIP")) totalDep += amt;
                    updateUI(); alert(`‚úÖ T…ôbrikl…ôr! +$${amt}`);
                } else alert(`‚ùå ${data.msg}`);
            } catch(e) { alert("Server X…ôtasƒ±! ƒ∞nternetinizi yoxlayƒ±n."); }
        }

        function checkWithdraw() {
            if(balance < MIN_WITHDRAW) return alert(`Minimum √ßƒ±xarƒ±≈ü: $${MIN_WITHDRAW}`);
            if(balance <= totalDep) return alert("Yalnƒ±z udduƒüunuz pulu √ß…ôk…ô bil…ôrsiniz!");
            wa('withdraw');
        }

        function wa(type) {
            let name = localStorage.getItem('jw_user_fullname') || "User";
            let txt = type === 'deposit' ? `Salam, m…ôn ${name}. Depozit etm…ôk ist…ôyir…ôm.` : `Salam, m…ôn ${name}. Pul √ß…ôkm…ôk ist…ôyir…ôm.`;
            window.open(`https://wa.me/${WA_NUMBER}?text=${encodeURIComponent(txt)}`, '_blank');
        }

        const sCtx = document.getElementById('stars').getContext('2d');
        function drawStars() {
            sCtx.clearRect(0,0,w,h); sCtx.fillStyle = "rgba(255,255,255,0.3)";
            for(let i=0;i<60;i++) {
                sCtx.beginPath(); sCtx.arc(Math.random()*w, Math.random()*h, Math.random()*2, 0, 6.28); sCtx.fill();
            }
        }
    </script>
</body>
</html>
