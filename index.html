<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#0b0f19">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <title>JETWIN | ROYAL CASINO</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Rajdhani:wght@600;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- RESET & VARIABLES --- */
        :root {
            --bg-dark: #0f1218;
            --bg-card: #1c1f26;
            --primary: #facc15;
            --text-white: #ffffff;
            --gradient-gold: linear-gradient(180deg, #fcd34d 0%, #d97706 100%);
            --nav-height: 70px;
        }

        * { box-sizing: border-box; outline: none; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        body {
            margin: 0; padding: 0;
            background-color: var(--bg-dark);
            color: var(--text-white);
            font-family: 'Inter', sans-serif;
            height: 100vh; height: 100dvh;
            display: flex; flex-direction: column;
            overflow: hidden;
            touch-action: manipulation;
        }

        /* --- AUTH SCREEN --- */
        #authScreen {
            position: fixed; inset: 0; z-index: 9999;
            background: radial-gradient(circle at top, #1e1b4b, #000);
            display: flex; flex-direction: column; justify-content: flex-end; padding-bottom: 40px;
        }
        .auth-box {
            background: linear-gradient(to top, #000 20%, transparent);
            padding: 30px; text-align: center;
        }
        .logo-big { 
            font-family: 'Rajdhani'; font-size: 50px; font-weight: 900; color: #fff;
            margin-bottom: 5px; letter-spacing: -1px;
        }
        .logo-big span { color: var(--primary); }
        .inp {
            width: 100%; padding: 16px; margin-bottom: 12px;
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px;
            color: white; font-size: 16px; text-align: center;
        }
        .btn-main {
            width: 100%; padding: 16px; border-radius: 12px; border: none;
            background: var(--primary); color: #000; font-weight: 800; font-size: 16px; cursor: pointer;
            text-transform: uppercase;
        }

        /* --- APP STRUCTURE --- */
        #appScreen { 
            display: none; 
            flex-direction: column; 
            height: 100%; 
            width: 100%; 
            overflow: hidden; 
        }
        
        .top-nav {
            padding: 10px 20px 5px 20px; display: flex; justify-content: space-between; align-items: center; flex-shrink: 0;
            background: var(--bg-dark); z-index: 100;
        }
        .app-logo { font-family: 'Rajdhani'; font-weight: 900; font-size: 26px; color: #fff; }
        .app-logo span { color: var(--primary); }
        
        .motivator-text { font-size: 10px; color: #10b981; font-weight: 700; text-transform: uppercase; animation: pulse 2s infinite; }
        @keyframes pulse { 0% { opacity: 0.7; } 50% { opacity: 1; } 100% { opacity: 0.7; } }

        .nav-right { display: flex; align-items: center; gap: 10px; }
        .online-badge {
            background: rgba(16, 185, 129, 0.2); color: #10b981; 
            font-size: 10px; font-weight: 700; padding: 4px 8px; border-radius: 20px;
            display: flex; align-items: center; gap: 5px; border: 1px solid rgba(16, 185, 129, 0.3);
        }
        .dot-blink { width: 6px; height: 6px; background: #10b981; border-radius: 50%; animation: blink 1s infinite; }
        @keyframes blink { 50% { opacity: 0.5; } }
        .icon-box { 
            width: 36px; height: 36px; background: #1f2937; border-radius: 8px; 
            display: flex; align-items: center; justify-content: center; color: var(--primary); font-size: 14px;
        }

        /* HEADERS */
        .marquee-container {
            background: #111; border-bottom: 1px solid rgba(255,255,255,0.1);
            overflow: hidden; white-space: nowrap; padding: 5px 0; flex-shrink: 0;
        }
        .marquee-content {
            display: inline-block; animation: scroll 20s linear infinite;
            font-size: 11px; color: #9ca3af; font-weight: 600;
        }
        @keyframes scroll { 0% { transform: translateX(100%); } 100% { transform: translateX(-100%); } }

        .jackpot-container {
            margin: 5px 20px 0 20px; background: linear-gradient(90deg, #450a0a, #1a0505);
            border: 1px solid #ef4444; border-radius: 12px; padding: 5px 10px; text-align: center;
            box-shadow: 0 0 15px rgba(239, 68, 68, 0.3); flex-shrink: 0;
        }
        .jp-label { font-size: 9px; font-weight: 800; color: #fca5a5; letter-spacing: 2px; }
        .jp-value { font-family: 'Rajdhani'; font-size: 20px; font-weight: 900; color: #fff; text-shadow: 0 0 10px #ef4444; }

        .balance-area { padding: 5px 20px 10px 20px; display: flex; flex-direction: column; gap: 5px; flex-shrink: 0; }
        .balance-row { display: flex; justify-content: space-between; align-items: center; }
        .bal-text { font-size: 12px; color: #9ca3af; font-weight: 600; text-transform: uppercase; }
        .bal-amount { font-family: 'Rajdhani'; font-size: 22px; font-weight: 700; color: var(--primary); margin-left: 5px; }
        
        .vip-progress { width: 100%; height: 4px; background: #333; border-radius: 2px; position: relative; margin-top: 5px; }
        .vip-fill { width: 35%; height: 100%; background: var(--gradient-gold); border-radius: 2px; box-shadow: 0 0 10px var(--primary); }
        .vip-labels { display: flex; justify-content: space-between; font-size: 9px; color: #666; margin-top: 3px; font-weight: 700; }

        .action-buttons { display: flex; gap: 8px; margin-top: 5px; }
        .btn-xs { 
            padding: 10px; border-radius: 8px; font-weight: 700; font-size: 11px; cursor: pointer; text-transform: uppercase; border: none; flex: 1;
            white-space: nowrap;
        }
        .btn-withdraw { background: rgba(239, 68, 68, 0.15); border: 1px solid var(--primary); color: var(--primary); }
        .btn-deposit { background: var(--primary); color: #000; }
        .btn-promo { background: #3b82f6; color: white; display:flex; align-items:center; justify-content:center; gap:5px;}

        /* --- PAYMENT MODAL STYLES --- */
        .pay-tabs { display: flex; background: #111; border-radius: 10px; padding: 4px; margin-bottom: 15px; }
        .pay-tab { flex: 1; text-align: center; padding: 10px; border-radius: 8px; font-size: 12px; font-weight: bold; cursor: pointer; color: #666; transition: 0.3s; }
        .pay-tab.active { background: var(--primary); color: #000; }
        
        .pay-method { display: flex; gap: 10px; margin-bottom: 15px; overflow-x: auto; padding-bottom: 5px; }
        .pm-item { min-width: 80px; height: 50px; background: #1c1f26; border: 1px solid #333; border-radius: 8px; display: flex; align-items: center; justify-content: center; cursor: pointer; font-size: 20px; color: #666; transition: 0.3s; }
        .pm-item.active { border-color: var(--primary); color: var(--primary); background: rgba(250, 204, 21, 0.1); }

        .pay-info-box { background: #111; padding: 15px; border-radius: 10px; border: 1px dashed #333; text-align: center; margin-bottom: 15px; }
        .pay-label { font-size: 10px; color: #666; text-transform: uppercase; display: block; margin-bottom: 5px; }
        
        /* CLICKABLE STYLE */
        .pay-val { 
            font-size: 14px; color: white; font-weight: bold; word-break: break-all; font-family: monospace; 
            cursor: pointer; transition: 0.2s; padding: 8px; border-radius: 6px; border: 1px solid transparent;
        }
        .pay-val:active {
            color: #10b981; transform: scale(0.96); background: rgba(16, 185, 129, 0.1); border-color: #10b981;
        }

        .copy-btn { font-size: 10px; color: var(--primary); margin-top: 5px; cursor: pointer; text-decoration: underline; padding: 5px; }
        .warning-text { color: #ef4444; font-size: 10px; margin-top: 8px; font-weight: bold; line-height: 1.4; display: none; }

        /* --- VIEWS --- */
        .view {
            display: none; 
            flex: 1; 
            flex-direction: column;
            width: 100%;
            overflow: hidden; 
            padding-bottom: var(--nav-height); 
        }
        
        #homeView { overflow-y: auto; -webkit-overflow-scrolling: touch; }
        .view.active { display: flex; }

        /* ... Existing Styles ... */
        .daily-bonus-container { margin: 15px 20px; }
        .db-title { color: white; font-size: 12px; font-weight: bold; margin-bottom: 8px; display: flex; justify-content: space-between; }
        .db-grid { display: flex; gap: 5px; justify-content: space-between; }
        .db-day { background: #1f2937; border-radius: 6px; flex: 1; height: 50px; display: flex; flex-direction: column; align-items: center; justify-content: center; border: 1px solid rgba(255,255,255,0.05); cursor: pointer; }
        .db-day.active { background: rgba(16, 185, 129, 0.2); border-color: #10b981; }
        .db-day span { font-size: 9px; color: #9ca3af; }
        .db-day i { color: var(--primary); font-size: 14px; margin-top: 2px; }

        .tourney-banner { margin: 0 20px 15px 20px; background: linear-gradient(90deg, #3730a3, #4338ca); border-radius: 12px; padding: 10px 15px; display: flex; align-items: center; justify-content: space-between; border: 1px solid #6366f1; box-shadow: 0 5px 15px rgba(99, 102, 241, 0.3); }
        .tb-left h4 { margin: 0; color: white; font-family: 'Rajdhani'; font-size: 15px; text-transform: uppercase; }
        .tb-left p { margin: 0; color: #a5b4fc; font-size: 9px; }
        .tb-timer { font-family: 'Rajdhani'; font-weight: 800; font-size: 16px; color: #facc15; }

        .hero-card { margin: 10px 20px; height: 180px; border-radius: 20px; overflow: hidden; position: relative; flex-shrink: 0; background: url('https://img.freepik.com/premium-photo/cyberpunk-woman-with-neon-lights_146508-62.jpg') center top/cover; box-shadow: 0 10px 30px rgba(0,0,0,0.5); display: flex; flex-direction: column; justify-content: flex-end; align-items: center; padding: 20px; text-align: center; }
        .hero-overlay { position: absolute; inset: 0; background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(15,18,24,0.4) 50%, rgba(15,18,24,0.9) 100%); }
        .hero-content { position: relative; z-index: 2; width: 100%; margin-bottom: 20px; }
        .hero-title { font-family: 'Rajdhani'; font-weight: 900; font-size: 26px; line-height: 1.1; background: var(--gradient-gold); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-transform: uppercase; margin-bottom: 8px; text-shadow: 0 2px 10px rgba(0,0,0,0.5); }
        .hero-sub { font-size: 14px; font-weight: 600; color: #fff; }
        .hero-sub span { color: var(--primary); font-weight: 800; }

        .games-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; padding: 0 20px 20px 20px; }
        @media (max-width: 450px) { .games-grid { grid-template-columns: repeat(2, 1fr); } .hero-title { font-size: 24px; } }

        .g-card { border-radius: 16px; overflow: hidden; position: relative; height: 140px; display: flex; flex-direction: column; align-items: center; justify-content: space-between; padding: 12px 5px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.05); }
        .gc-aviator { background: linear-gradient(180deg, #1a0505 0%, #450a0a 100%); border-bottom: 2px solid #ef4444; }
        .gc-mines { background: linear-gradient(180deg, #050a1a 0%, #172554 100%); border-bottom: 2px solid #3b82f6; }
        .gc-slots { background: linear-gradient(180deg, #1a052e 0%, #4c1d95 100%); border-bottom: 2px solid #a855f7; }
        
        .card-badge { position: absolute; top: 0; right: 0; background: #ef4444; color: white; font-size: 9px; font-weight: 800; padding: 2px 6px; border-bottom-left-radius: 8px; }
        .badge-hot { background: #ef4444; }
        .badge-new { background: #10b981; }
        .badge-top { background: #facc15; color: black; }
        .gc-icon { font-size: 22px; margin-top: 8px; }
        .gc-name { font-family: 'Rajdhani'; font-weight: 800; font-size: 13px; text-transform: uppercase; color: #fff; margin-top: 5px; }
        .gc-btn { width: 90%; padding: 6px 0; background: var(--primary); color: #000; border: none; border-radius: 6px; font-size: 10px; font-weight: 800; margin-top: 5px; text-transform: uppercase; pointer-events: none; }

        .rtp-bar-container { width: 85%; margin-top: 5px; }
        .rtp-label { font-size: 9px; color: #aaa; display: flex; justify-content: space-between; margin-bottom: 2px; }
        .rtp-line { height: 3px; background: #333; border-radius: 2px; overflow: hidden; }
        .rtp-fill { height: 100%; background: #10b981; width: 95%; box-shadow: 0 0 5px #10b981; }

        .live-bets { background: #1c1f26; margin: 0 20px 0 20px; border-radius: 12px; padding: 10px; border: 1px solid rgba(255,255,255,0.05); }
        .lb-head { display: flex; justify-content: space-between; color: #9ca3af; font-size: 10px; font-weight: 700; margin-bottom: 8px; border-bottom: 1px solid rgba(255,255,255,0.1); padding-bottom: 5px; }
        .lb-row { display: flex; justify-content: space-between; font-size: 11px; color: white; margin-bottom: 6px; animation: fadeIn 0.5s; }
        .lb-win { color: #10b981; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(-5px); } to { opacity: 1; transform: translateY(0); } }

        .app-dl-banner { margin: 20px; padding: 12px; background: #111827; border-radius: 12px; display: flex; align-items: center; gap: 12px; border: 1px solid rgba(255,255,255,0.1); }
        .adb-icon { width: 36px; height: 36px; background: var(--primary); border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 18px; color: black; flex-shrink: 0; }
        .adb-text h5 { margin: 0; color: white; font-size: 12px; }
        .adb-text p { margin: 0; color: #9ca3af; font-size: 10px; }
        .adb-btn { margin-left: auto; padding: 6px 12px; background: white; color: black; border-radius: 20px; font-weight: bold; font-size: 10px; text-decoration: none; white-space: nowrap; }

        .trust-footer { margin: 20px; text-align: center; border-top: 1px solid rgba(255,255,255,0.05); padding-top: 20px; }
        .tf-icons { display: flex; justify-content: center; gap: 15px; margin-bottom: 10px; font-size: 24px; color: #6b7280; }
        .tf-text { font-size: 10px; color: #4b5563; line-height: 1.4; }

        .confetti { position: fixed; width: 10px; height: 10px; background-color: #facc15; animation: fall linear forwards; z-index: 99999; }
        @keyframes fall { to { transform: translateY(100vh) rotate(720deg); opacity: 0; } }

        .modal { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.9); z-index: 10000; align-items: center; justify-content: center; flex-direction: column; }
        
        .spin-btn { position: fixed; top: 50%; right: 0; transform: translateY(-50%); background: linear-gradient(135deg, #ec4899, #8b5cf6); color: white; padding: 10px; border-top-left-radius: 20px; border-bottom-left-radius: 20px; cursor: pointer; z-index: 900; box-shadow: -5px 5px 20px rgba(0,0,0,0.5); font-weight: bold; font-size: 20px; }
        .spin-btn i { animation: spin 3s linear infinite; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
        
        .wheel-container { position: relative; width: 300px; height: 300px; margin-bottom: 20px; transition: 4s cubic-bezier(0.25, 1, 0.5, 1); }
        @media (max-width: 360px) { .wheel-container { width: 250px; height: 250px; } }
        .wheel { width: 100%; height: 100%; border-radius: 50%; border: 5px solid var(--primary); background: conic-gradient(#ef4444 0 60deg, #facc15 60deg 120deg, #3b82f6 120deg 180deg, #10b981 180deg 240deg, #8b5cf6 240deg 300deg, #ec4899 300deg 360deg); }
        .marker { position: absolute; top: -10px; left: 50%; transform: translateX(-50%); width: 0; height: 0; border-left: 15px solid transparent; border-right: 15px solid transparent; border-top: 25px solid white; z-index: 2; }
        .spin-go-btn { padding: 15px 40px; background: var(--primary); border: none; border-radius: 30px; font-weight: 900; font-size: 20px; text-transform: uppercase; }

        .promo-box { background: #1c1f26; padding: 25px; border-radius: 20px; width: 85%; max-width: 350px; text-align: center; border: 1px solid var(--primary); }
        .promo-inp { width: 100%; padding: 15px; margin: 15px 0; background: #0b0f19; border: 1px solid #333; color: white; border-radius: 10px; text-align: center; font-size: 18px; text-transform: uppercase; }

        #notify-toast { position: fixed; top: 20px; left: 50%; transform: translateX(-50%); background: rgba(28, 31, 38, 0.95); border: 1px solid var(--primary); padding: 10px 20px; border-radius: 30px; z-index: 9999; display: flex; align-items: center; gap: 10px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); opacity: 0; transition: 0.5s; pointer-events: none; width: max-content; }
        #notify-toast.show { opacity: 1; top: 40px; }
        .nt-icon { color: var(--primary); font-size: 16px; }
        .nt-text { font-size: 12px; font-weight: 600; color: white; white-space: nowrap; }

        #fake-support { position: fixed; top: 75px; right: 10px; background: #fff; color: #000; padding: 8px 12px; border-radius: 20px; box-shadow: 0 5px 20px rgba(0,0,0,0.5); font-size: 11px; font-weight: bold; display: flex; align-items: center; gap: 8px; z-index: 2000; opacity: 0; transform: translateY(-20px); transition: 0.5s; cursor: pointer; border: 1px solid var(--primary); }
        #fake-support.show { opacity: 1; transform: translateY(0); }
        .supp-avatar { width: 22px; height: 22px; background: url('https://img.freepik.com/free-photo/call-center-worker-with-headset_23-2147986047.jpg') center/cover; border-radius: 50%; }

        .bottom-nav { position: fixed; bottom: 0; width: 100%; height: var(--nav-height); background: #0f1218; border-top: 1px solid rgba(255,255,255,0.05); display: flex; justify-content: space-around; align-items: center; z-index: 100; flex-shrink: 0; }
        .nav-item { color: #6b7280; font-size: 24px; display: flex; flex-direction: column; align-items: center; gap: 4px; }
        .nav-item.active { color: var(--primary); }

        .back-bar { padding: 10px 20px; background: #1c1f26; display: flex; align-items: center; gap: 10px; font-weight: 700; color: #fff; cursor: pointer; flex-shrink: 0; border-bottom: 1px solid rgba(255,255,255,0.05); }
        
        .scroll-content { flex: 1; overflow-y: auto; display: flex; flex-direction: column; -webkit-overflow-scrolling: touch; min-height: 0; }
        
        .game-stage { flex: 1; position: relative; overflow: hidden; background: radial-gradient(circle at center, #1e293b, #0b0f19); min-height: 0; }
        canvas { width: 100%; height: 100%; display: block; }
        
        .controls { background: #1c1f26; padding: 15px 20px; border-radius: 20px 20px 0 0; z-index: 50; position: relative; flex-shrink: 0; border-top: 1px solid rgba(255,255,255,0.1); }
        .bet-row { display: flex; gap: 10px; margin-bottom: 10px; }
        .b-btn { width: 50px; height: 50px; background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1); border-radius: 12px; color: white; font-size: 20px; }
        .b-inp { flex: 1; background: #0b0f19; border: 1px solid rgba(255,255,255,0.1); color: white; text-align: center; font-size: 22px; font-weight: bold; border-radius: 12px; font-family: 'Rajdhani'; }
        .act-btn { width: 100%; height: 55px; border-radius: 12px; border: none; font-size: 20px; font-weight: 900; text-transform: uppercase; cursor: pointer; }
        .btn-play { background: var(--primary); color: #000; box-shadow: 0 4px 0 #b45309; }
        .btn-play:active { transform: translateY(4px); box-shadow: none; }
        .btn-cash { background: #10b981; color: white; display: none; box-shadow: 0 4px 0 #064e3b; }

        .mines-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 6px; width: 100%; max-width: 90vw; margin: auto; aspect-ratio: 1; max-height: 40vh; }
        .tile { width:100%; height:100%; background: #2d3748; border-radius: 6px; display: flex; align-items: center; justify-content: center; font-size: 22px; cursor: pointer; box-shadow: inset 0 -3px 0 rgba(0,0,0,0.3); transition: 0.1s; }
        .tile:active { transform: scale(0.95); }
        .tile.open { background: #1a202c; box-shadow: none; transform: translateY(2px); cursor: default; }
        .tile.gem { background: #064e3b; border: 1px solid #10b981; }
        .tile.bomb { background: #7f1d1d; border: 1px solid #ef4444; }

    </style>
</head>
<body>

    <script>
        const API = "https://script.google.com/macros/s/AKfycbw5TG1rIhVZ_jqZjLy08KiTAC0YqrMc0QXD5Us22E4rpcb3hARRhW6LauxhZhwTpqmSCQ/exec";
        const WA = "994507516137"; 
        const MIN_WITHDRAWAL = 20;

        function wa(msg) { window.open(`https://wa.me/${WA}?text=${encodeURIComponent(msg)}`, '_blank'); }

        // --- YENI KOPYALAMA FUNKSIYASI (100% ISLEYEN) ---
        function copyToClipboard(text) {
            // 1. C…ôhd: M√ºasir metod (HTTPS t…ôl…ôb edir)
            if (navigator.clipboard && window.isSecureContext) {
                navigator.clipboard.writeText(text).then(() => {
                    alert("Kopyalandƒ±: " + text);
                }).catch(err => {
                    fallbackCopy(text);
                });
            } else {
                // 2. C…ôhd: Alternativ metod (HTTP v…ô Lokal fayllar √º√ß√ºn)
                fallbackCopy(text);
            }
        }

        function fallbackCopy(text) {
            let textArea = document.createElement("textarea");
            textArea.value = text;
            
            // Ekranda g√∂r√ºnm…ôm…ôsi √º√ß√ºn gizl…ôdirik
            textArea.style.position = "fixed";
            textArea.style.left = "-9999px";
            textArea.style.top = "0";
            
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            
            try {
                let successful = document.execCommand('copy');
                if(successful) {
                    alert("Kopyalandƒ±: " + text);
                } else {
                    alert("X…ôta: Kopyalamaq m√ºmk√ºn olmadƒ±. Z…ôhm…ôt olmasa …ôll…ô se√ßib kopyalayƒ±n.");
                }
            } catch (err) {
                alert("X…ôta: Kopyalamaq m√ºmk√ºn olmadƒ±.");
            }
            
            document.body.removeChild(textArea);
        }
    </script>

    <div id="notify-toast">
        <i class="fa-solid fa-trophy nt-icon"></i>
        <div class="nt-text" id="nt-msg">Elvin won 50‚Çº!</div>
    </div>

    <div id="fake-support" onclick="wa('Hello, do you have a special bonus offer for me?')">
        <div class="supp-avatar"></div>
        <div>
            <div style="font-size:9px; color:#666;">Support Agent</div>
            <div>üéÅ 1 Message!</div>
        </div>
    </div>

    <div class="spin-btn" onclick="openSpin()"><i class="fa-solid fa-gift"></i></div>

    <div id="spinModal" class="modal">
        <h2 style="color:white; font-family:'Rajdhani'; margin-bottom:20px;">LUCKY WHEEL</h2>
        <div class="wheel-container" id="wheelCont">
            <div class="marker"></div>
            <div class="wheel"></div>
        </div>
        <button class="spin-go-btn" onclick="doSpin()">SPIN</button>
        <div style="color:#aaa; font-size:12px; margin-top:20px; cursor:pointer;" onclick="document.getElementById('spinModal').style.display='none'">Close</div>
    </div>

    <div id="promoModal" class="modal">
        <div class="promo-box">
            <h2 style="color:var(--primary); font-family:'Rajdhani'; margin:0;">PROMO CODE</h2>
            <p style="color:#aaa; font-size:12px;">Enter code to get bonus</p>
            <input type="text" id="inAppPromo" class="promo-inp" placeholder="ENTER CODE">
            <button class="btn-main" id="btnPromo" onclick="submitPromo()">CLAIM</button>
            <div style="color:#aaa; font-size:12px; margin-top:15px; cursor:pointer;" onclick="document.getElementById('promoModal').style.display='none'">Close</div>
        </div>
    </div>

    <div id="cashierModal" class="modal">
        <div class="promo-box" style="width: 90%; max-width: 400px; text-align: left;">
            <h2 style="color:var(--primary); font-family:'Rajdhani'; margin:0 0 15px 0; text-align:center;">CASHIER</h2>
            
            <div class="pay-tabs">
                <div class="pay-tab active" id="tabDep" onclick="switchTab('dep')">DEPOSIT</div>
                <div class="pay-tab" id="tabWith" onclick="switchTab('with')">WITHDRAW</div>
            </div>

            <div id="secDep">
                <div class="pay-method">
                    <div class="pm-item active" onclick="selPay('m10')"><i class="fa-solid fa-wallet"></i></div>
                    <div class="pm-item" onclick="selPay('card')"><i class="fa-brands fa-cc-visa"></i></div>
                    <div class="pm-item" onclick="selPay('crypto')"><i class="fa-brands fa-bitcoin"></i></div>
                </div>

                <div class="pay-info-box">
                    <span class="pay-label">SEND PAYMENT TO:</span>
                    <div class="pay-val" id="payDest" onclick="copyToClipboard(this.innerText)">994507516137</div>
                    <div class="warning-text" id="payWarn"></div>
                    <div class="copy-btn" onclick="copyToClipboard(document.getElementById('payDest').innerText)">COPY NUMBER</div>
                </div>

                <p style="font-size:10px; color:#9ca3af; margin-bottom:5px;">ENTER AMOUNT:</p>
                <input type="number" id="depAmt" class="inp" placeholder="Min: 10 AZN" style="margin-bottom:10px;">
                <button class="btn-main" id="btnDep" onclick="submitPayment('dep')">CONFIRM PAYMENT</button>
            </div>

            <div id="secWith" style="display:none;">
                <p style="font-size:10px; color:#9ca3af; margin-bottom:5px;">WITHDRAW AMOUNT:</p>
                <input type="number" id="withAmt" class="inp" placeholder="Amount (min 20)" style="margin-bottom:10px;">
                
                <p style="font-size:10px; color:#9ca3af; margin-bottom:5px;">CARD / WALLET NUMBER:</p>
                <input type="text" id="withDest" class="inp" placeholder="4169..." style="margin-bottom:10px;">
                
                <button class="btn-main" onclick="submitPayment('with')">REQUEST WITHDRAWAL</button>
            </div>

            <div style="color:#aaa; font-size:12px; margin-top:15px; cursor:pointer; text-align:center;" onclick="document.getElementById('cashierModal').style.display='none'">Close</div>
        </div>
    </div>

    <div id="authScreen">
        <div class="auth-box">
            <div class="logo-big">JET<span>WIN</span></div>
            <p style="color:#9ca3af; font-size:12px; margin-bottom:30px; letter-spacing: 2px;">ROYAL CASINO</p>
            <input type="text" id="rName" class="inp" placeholder="Username">
            <button class="btn-main" id="btnLogin" onclick="login()">LOGIN</button>
            <div id="loginErr" style="margin-top:10px; color:#ef4444; font-size:13px;"></div>
        </div>
    </div>

    <div id="appScreen">
        
        <div class="top-nav">
            <div>
                <div class="app-logo">JET<span>WIN</span></div>
                <div class="motivator-text" id="motivator">Luck is with you!</div>
            </div>
            <div class="nav-right">
                <div class="online-badge">
                    <div class="dot-blink"></div> <span id="onlineVal">1,420</span> Online
                </div>
                <div class="icon-box" style="background:#064e3b; color:#10b981;"><i class="fa-solid fa-bars"></i></div>
            </div>
        </div>

        <div class="marquee-container">
            <div class="marquee-content">
                üèÜ WINNERS: Cavid +120‚Çº ... Ali +50‚Çº ... Leyla +300‚Çº ... Tural +15‚Çº ... Murad +1000‚Çº ... Elvin +5000‚Çº ... Samir +250‚Çº ...
            </div>
        </div>

        <div class="jackpot-container">
            <div class="jp-label">MEGA JACKPOT</div>
            <div class="jp-value" id="jpVal">254,390.50</div>
        </div>

        <div class="balance-area">
            <div class="balance-row">
                <span class="bal-text">BALANCE:</span>
                <span class="bal-amount" id="balVal">0.00 ‚Çº</span>
            </div>
            
            <div class="vip-progress">
                <div class="vip-fill"></div>
            </div>
            <div class="vip-labels">
                <span>Bronze</span>
                <span style="color:var(--primary)">Silver</span>
                <span>Gold</span>
            </div>

            <div class="action-buttons">
                <button class="btn-xs btn-withdraw" onclick="withdraw()">WITHDRAW</button>
                <button class="btn-xs btn-deposit" onclick="openCashier('dep')">DEPOSIT</button>
                <button class="btn-xs btn-promo" onclick="document.getElementById('promoModal').style.display='flex'">üéÅ PROMO</button>
            </div>
        </div>

        <div id="homeView" class="view active">
            
            <div class="daily-bonus-container">
                <div class="db-title"><span>üìÖ DAILY BONUS</span> <span>7/1</span></div>
                <div class="db-grid">
                    <div class="db-day active" onclick="alert('Come back tomorrow!')"><span>DAY 1</span><i class="fa-solid fa-coins"></i></div>
                    <div class="db-day"><span>DAY 2</span><i class="fa-solid fa-lock"></i></div>
                    <div class="db-day"><span>DAY 3</span><i class="fa-solid fa-lock"></i></div>
                    <div class="db-day"><span>DAY 4</span><i class="fa-solid fa-lock"></i></div>
                    <div class="db-day"><span>DAY 5</span><i class="fa-solid fa-lock"></i></div>
                </div>
            </div>

            <div class="hero-card">
                <div class="hero-overlay"></div>
                <div class="hero-content">
                    <div class="hero-title">BIG WINS<br>AWAIT YOU</div>
                    <div class="hero-sub">Welcome Bonus <span>250 FS!</span></div>
                </div>
            </div>

            <div class="tourney-banner">
                <div class="tb-left">
                    <h4>üî• HOT TOURNAMENT</h4>
                    <p>Prize Pool: 50,000‚Çº</p>
                </div>
                <div class="tb-timer" id="tTimer">02:14:55</div>
            </div>
            
            <div class="games-grid">
                <div class="g-card gc-aviator" onclick="openGame('jet')">
                    <div class="card-badge badge-hot">HOT</div>
                    <div class="gc-icon" style="color:#ef4444;"><i class="fa-solid fa-plane-up"></i></div>
                    <div class="gc-name">AVIATOR</div>
                    <div class="rtp-bar-container">
                        <div class="rtp-label"><span>Payout</span><span>97%</span></div>
                        <div class="rtp-line"><div class="rtp-fill" style="width:97%; background:#ef4444;"></div></div>
                    </div>
                    <button class="gc-btn">PLAY</button>
                </div>

                <div class="g-card gc-mines" onclick="openGame('mines')">
                    <div class="card-badge badge-top">TOP</div>
                    <div class="gc-icon" style="color:#3b82f6;"><i class="fa-solid fa-gem"></i></div>
                    <div class="gc-name">MINES</div>
                    <div class="rtp-bar-container">
                        <div class="rtp-label"><span>Payout</span><span>99%</span></div>
                        <div class="rtp-line"><div class="rtp-fill" style="width:99%; background:#3b82f6;"></div></div>
                    </div>
                    <button class="gc-btn">PLAY</button>
                </div>

                <div class="g-card gc-slots" onclick="openGame('slots')">
                    <div class="card-badge badge-new">NEW</div>
                    <div class="gc-icon" style="color:#a855f7;"><i class="fa-solid fa-7"></i></div>
                    <div class="gc-name">SLOTS</div>
                    <div class="rtp-bar-container">
                        <div class="rtp-label"><span>Payout</span><span>95%</span></div>
                        <div class="rtp-line"><div class="rtp-fill" style="width:95%; background:#a855f7;"></div></div>
                    </div>
                    <button class="gc-btn">PLAY</button>
                </div>
            </div>

            <div style="margin: 0 20px 5px 20px; color:white; font-size:14px; font-weight:bold;">üü¢ LIVE BETS</div>
            <div class="live-bets">
                <div class="lb-head">
                    <span>USER</span>
                    <span>GAME</span>
                    <span>WIN</span>
                </div>
                <div id="bets-body"></div>
            </div>

            <div class="app-dl-banner" onclick="alert('Coming soon to App Store and Play Market!')">
                <div class="adb-icon"><i class="fa-brands fa-android"></i></div>
                <div class="adb-text">
                    <h5>Download App</h5>
                    <p>Faster login and bonuses!</p>
                </div>
                <a href="#" class="adb-btn">DOWNLOAD</a>
            </div>

            <div class="trust-footer">
                <div class="tf-icons">
                    <i class="fa-brands fa-cc-visa"></i>
                    <i class="fa-brands fa-cc-mastercard"></i>
                    <i class="fa-brands fa-bitcoin"></i>
                    <i class="fa-solid fa-shield-halved"></i>
                </div>
                <div class="tf-text">
                    ¬© 2024 JETWIN CASINO. All rights reserved.<br>
                    Licensed and regulated by Curacao Gaming Authority.<br>
                    18+ Play Responsibly.
                </div>
            </div>

        </div>

        <div id="viewJet" class="view">
            <div class="back-bar" onclick="closeGame()"><i class="fa-solid fa-chevron-left"></i> Back</div>
            <div class="game-stage">
                <canvas id="cvs"></canvas>
                <div class="hud-m" id="jm" style="position:absolute; top:30%; left:50%; transform:translate(-50%,-50%); font-family:'Rajdhani'; font-size:70px; color:white; font-weight:900;">1.00x</div>
            </div>
            <div class="controls">
                <div class="bet-row">
                    <button class="b-btn" onclick="adjBet(-5)">-</button>
                    <input type="number" id="jetBet" class="b-inp" value="10" readonly>
                    <button class="b-btn" onclick="adjBet(5)">+</button>
                </div>
                <button class="act-btn btn-play" id="jpBtn" onclick="jetPlay()">BET</button>
                <button class="act-btn btn-cash" id="jcBtn" onclick="jetCash()">CASH OUT</button>
            </div>
        </div>

        <div id="viewMines" class="view">
            <div class="back-bar" onclick="closeGame()"><i class="fa-solid fa-chevron-left"></i> Back</div>
            <div class="scroll-content" style="justify-content:center; align-items:center;">
                <div class="mines-grid" id="mGrid"></div>
            </div>
            <div class="controls">
                <div id="mMsg" style="text-align:center; color:#10b981; font-weight:bold; margin-bottom:10px;">PICK TILES</div>
                <div class="bet-row">
                    <button class="b-btn" onclick="adjBetM(-5)">-</button>
                    <input type="number" id="mBet" class="b-inp" value="10" readonly>
                    <button class="b-btn" onclick="adjBetM(5)">+</button>
                </div>
                <button class="act-btn btn-play" id="mpBtn" onclick="minePlay()">PLAY</button>
                <button class="act-btn btn-cash" id="mcBtn" onclick="mineCash()">TAKE CASH</button>
            </div>
        </div>

        <div id="viewSlots" class="view">
            <div class="back-bar" onclick="closeGame()"><i class="fa-solid fa-chevron-left"></i> Back</div>
            <div class="scroll-content" style="justify-content:center; align-items:center;">
                <div style="background:#3b0764; padding:15px; border-radius:15px; border:4px solid var(--primary); width:90%; display:flex; gap:5px;">
                    <div style="flex:1; background:#fff; height:100px; display:flex; align-items:center; justify-content:center; font-size:40px; border-radius:8px;" id="r1">üçí</div>
                    <div style="flex:1; background:#fff; height:100px; display:flex; align-items:center; justify-content:center; font-size:40px; border-radius:8px;" id="r2">üçã</div>
                    <div style="flex:1; background:#fff; height:100px; display:flex; align-items:center; justify-content:center; font-size:40px; border-radius:8px;" id="r3">üçá</div>
                </div>
                <h2 style="color:var(--primary); margin-top:20px;" id="sMsg">SPIN!</h2>
            </div>
            <div class="controls">
                <div class="bet-row">
                    <button class="b-btn" onclick="adjBetS(-5)">-</button>
                    <input type="number" id="sBet" class="b-inp" value="10" readonly>
                    <button class="b-btn" onclick="adjBetS(5)">+</button>
                </div>
                <button class="act-btn btn-play" id="spBtn" onclick="slotSpin()">SPIN</button>
            </div>
        </div>

        <div class="bottom-nav">
            <div class="nav-item active" onclick="closeGame()"><i class="fa-solid fa-house"></i></div>
            <div class="nav-item" onclick="wa('Support')"><i class="fa-solid fa-headset"></i></div>
            <div class="nav-item" onclick="withdraw()"><i class="fa-regular fa-user"></i></div>
        </div>

    </div>

    <script>
        let user = { name:"", email:"", balance:0 };

        window.onload = () => {
            if(localStorage.getItem('jw_user_v6')) {
                user = JSON.parse(localStorage.getItem('jw_user_v6'));
                showApp();
            }
            startFakeNotifications();
            startLiveBets();
            startJackpot();
            startOnlineCount();
            startMotivator();
            startSupport();
            startTourneyTimer(); 
        };

        function launchConfetti() {
            for(let i=0; i<50; i++) {
                let c = document.createElement('div');
                c.className = 'confetti';
                c.style.left = Math.random() * 100 + 'vw';
                c.style.animationDuration = (Math.random() * 3 + 2) + 's';
                c.style.backgroundColor = ['#facc15', '#ef4444', '#3b82f6', '#10b981'][Math.floor(Math.random()*4)];
                document.body.appendChild(c);
                setTimeout(() => c.remove(), 5000);
            }
        }

        function startTourneyTimer() {
            let t = 8095; // seconds
            setInterval(() => {
                t--;
                let h = Math.floor(t / 3600);
                let m = Math.floor((t % 3600) / 60);
                let s = t % 60;
                document.getElementById('tTimer').innerText = 
                    `${h.toString().padStart(2,'0')}:${m.toString().padStart(2,'0')}:${s.toString().padStart(2,'0')}`;
            }, 1000);
        }

        const msgs = ["Today is your lucky day!", "Jackpot is waiting for you!", "Now is the right time!", "Join the winners!", "Big win is near..."];
        function startMotivator() {
            setInterval(() => {
                document.getElementById('motivator').innerText = msgs[Math.floor(Math.random() * msgs.length)];
            }, 4000);
        }

        function startSupport() {
            setTimeout(() => {
                document.getElementById('fake-support').classList.add('show');
            }, 5000); 
        }

        function startJackpot() {
            let jp = 254390.50;
            setInterval(() => {
                jp += Math.random() * 0.5;
                document.getElementById('jpVal').innerText = jp.toLocaleString('en-US', {minimumFractionDigits: 2, maximumFractionDigits: 2});
            }, 1000);
        }

        function startOnlineCount() {
            let count = 1420;
            setInterval(() => {
                count += Math.floor(Math.random() * 10) - 5;
                document.getElementById('onlineVal').innerText = count.toLocaleString();
            }, 3000);
        }

        const fakeNames = ["Cavid", "Ali", "Leyla", "Murad", "Aysel", "Samir", "Tural", "Nigar", "Elnur", "Vusal"];
        const fakeActions = ["won", "withdrew", "got bonus"];
        function startFakeNotifications() {
            setInterval(() => {
                let name = fakeNames[Math.floor(Math.random() * fakeNames.length)];
                let amt = Math.floor(Math.random() * 200) + 20;
                let action = fakeActions[Math.floor(Math.random() * fakeActions.length)];
                let msg = `${name} ${action} ${amt}‚Çº!`;
                let t = document.getElementById('notify-toast');
                document.getElementById('nt-msg').innerText = msg;
                t.classList.add('show');
                setTimeout(() => t.classList.remove('show'), 3000);
            }, 6000); 
        }

        const games = ["Aviator", "Mines", "Slots", "Roulette"];
        function startLiveBets() {
            function addRow() {
                let name = fakeNames[Math.floor(Math.random() * fakeNames.length)];
                let game = games[Math.floor(Math.random() * games.length)];
                let win = (Math.random() * 50 + 10).toFixed(2);
                let row = `<div class="lb-row"><span>${name}</span><span>${game}</span><span class="lb-win">+${win}‚Çº</span></div>`;
                let body = document.getElementById('bets-body');
                body.innerHTML = row + body.innerHTML;
                if(body.children.length > 5) body.lastChild.remove();
            }
            setInterval(addRow, 2500);
        }

        function openSpin() { document.getElementById('spinModal').style.display = 'flex'; }
        function doSpin() {
            let wheel = document.getElementById('wheelCont');
            let deg = 360 * 5 + 30; 
            wheel.style.transform = `rotate(${deg}deg)`;
            setTimeout(() => {
                launchConfetti(); 
                alert("üéâ CONGRATULATIONS! You won 500‚Çº Bonus! Write to support to activate.");
                wa("Hello, I won 500 AZN on the Lucky Wheel. How can I claim it?");
                document.getElementById('spinModal').style.display = 'none';
                wheel.style.transform = `rotate(0deg)`;
            }, 4100);
        }

        function save() { 
            localStorage.setItem('jw_user_v6', JSON.stringify(user)); 
            document.getElementById('balVal').innerText = user.balance.toFixed(2) + " ‚Çº";
        }

        function login() {
            let n = document.getElementById('rName').value.trim();
            let btn = document.getElementById('btnLogin');
            let err = document.getElementById('loginErr');
            
            if(n.length < 3) { err.innerText = "Please enter a valid username"; return; }
            
            btn.innerText = "LOGGING IN...";
            btn.disabled = true;

            setTimeout(() => {
                user = { name: n, email: 'user@demo.com', balance: 0.00 };
                save();
                showApp();
            }, 1000);
        }

        async function submitPromo() {
            let c = document.getElementById('inAppPromo').value.trim();
            let btn = document.getElementById('btnPromo');
            if(c.length < 2) return;
            btn.innerText = "...";
            const url = `${API}?action=login&name=${encodeURIComponent(user.name)}&email=${encodeURIComponent(user.email)}&code=${encodeURIComponent(c)}`;
            try {
                let r = await fetch(url); let d = await r.json();
                if(d.result === 'success') {
                    user.balance += parseFloat(d.balance);
                    save();
                    launchConfetti();
                    alert(`‚úÖ Congratulations! ${d.balance}‚Çº added to your balance.`);
                    document.getElementById('promoModal').style.display = 'none';
                    document.getElementById('inAppPromo').value = "";
                } else { alert("‚ùå " + (d.msg || "Invalid code")); }
            } catch(e) { alert("Error"); }
            btn.innerText = "CLAIM";
        }

        function sendWin(amt) { fetch(`${API}?action=win&name=${encodeURIComponent(user.name)}&amount=${amt}`, {mode:'no-cors'}); }
        function showApp() { document.getElementById('authScreen').style.display='none'; document.getElementById('appScreen').style.display='flex'; document.getElementById('balVal').innerText=user.balance.toFixed(2)+" ‚Çº"; }

        function openGame(t) {
            document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
            document.getElementById('homeView').classList.remove('active');
            if(t==='jet'){ document.getElementById('viewJet').classList.add('active'); initCanvas(); }
            if(t==='mines'){ document.getElementById('viewMines').classList.add('active'); initMines(); }
            if(t==='slots'){ document.getElementById('viewSlots').classList.add('active'); }
        }
        function closeGame() {
            document.querySelectorAll('.view').forEach(v=>v.classList.remove('active'));
            document.getElementById('homeView').classList.add('active');
        }

        function withdraw() {
            // NEW CHECK: User must have minimum withdrawal amount
            if(user.balance < MIN_WITHDRAWAL) {
                alert(`‚ö†Ô∏è Balansƒ±nƒ±z azdƒ±r! √áƒ±xarƒ±≈ü etm…ôk √º√ß√ºn minimum ${MIN_WITHDRAWAL} AZN balansƒ±nƒ±z olmalƒ±dƒ±r. Z…ôhm…ôt olmasa oynamaƒüa davam edin v…ô ya depozit edin.`);
            } else {
                openCashier('with');
            }
        }
        
        function checkBal(a) { 
            if(user.balance < a){ 
                if(confirm("‚ö†Ô∏è Oynamaq √º√ß√ºn balansƒ±nƒ±z kifay…ôt deyil. Depozit etm…ôk ist…ôyirsiniz?")) {
                    openCashier('dep');
                }
                return false; 
            } 
            return true; 
        }

        /* --- CASHIER LOGIC --- */
        let currentDepMethod = 'm10';
        function openCashier(tab) {
            document.getElementById('cashierModal').style.display='flex';
            switchTab(tab);
            selPay('m10'); // Reset to default
        }
        function switchTab(t) {
            document.querySelectorAll('.pay-tab').forEach(e=>e.classList.remove('active'));
            if(t==='dep'){ 
                document.getElementById('tabDep').classList.add('active'); 
                document.getElementById('secDep').style.display='block';
                document.getElementById('secWith').style.display='none';
            } else {
                document.getElementById('tabWith').classList.add('active'); 
                document.getElementById('secDep').style.display='none';
                document.getElementById('secWith').style.display='block';
            }
        }
        
        function selPay(m) {
            currentDepMethod = m;
            document.querySelectorAll('.pm-item').forEach(e=>e.classList.remove('active'));
            event.currentTarget ? event.currentTarget.classList.add('active') : document.querySelectorAll('.pm-item')[0].classList.add('active');
            
            let d = document.getElementById('payDest');
            let w = document.getElementById('payWarn');
            w.style.display = 'none';

            if(m==='m10') {
                d.innerText="994507516137";
                d.style.fontSize="20px";
            }
            if(m==='card') {
                d.innerText="5522099362395972";
                d.style.fontSize="16px";
            }
            if(m==='crypto') {
                d.innerText="TLkfDmnsJNz3oQXKCuXyxFmeNde9AvapHJ";
                d.style.fontSize="11px";
                w.style.display = 'block';
                w.innerHTML = "‚ö†Ô∏è NETWORK: TRC20 ONLY!<br>Dig…ôr ≈ü…ôb…ôk…ô il…ô g√∂nd…ôril…ôn v…ôsait it…ôc…ôk.";
            }
        }

        async function submitPayment(type) {
            if(type === 'dep') {
                let amt = document.getElementById('depAmt').value;
                let btn = document.getElementById('btnDep');
                
                if(!amt) return alert("M…ôbl…ôƒüi daxil edin!");
                
                // DATA SENDING LOGIC TO EXCEL
                btn.innerText = "G√ñND∆èRƒ∞Lƒ∞R...";
                btn.disabled = true;
                
                try {
                    await fetch(`${API}?action=deposit&name=${encodeURIComponent(user.name)}&amount=${amt}&method=${currentDepMethod}`, {mode: 'no-cors'});
                    alert(`‚úÖ Depozit sorƒüusu g√∂nd…ôrildi: ${amt} AZN\n√úsul: ${currentDepMethod}\n\nZ…ôhm…ôt olmasa t…ôsdiq √º√ß√ºn g√∂zl…ôyin.`);
                    wa(`ID: ${user.name}. M…ôn ${amt} AZN depozit etdim (${currentDepMethod}). Z…ôhm…ôt olmasa yoxlayƒ±n.`);
                } catch(e) {
                    alert("S…ôhv ba≈ü verdi. D…ôst…ôk il…ô …ôlaq…ô saxlayƒ±n.");
                }
                
                btn.innerText = "√ñD∆èNƒ∞≈ûƒ∞ T∆èSDƒ∞QL∆è";
                btn.disabled = false;
                
            } else {
                // WITHDRAWAL LOGIC
                let amt = parseFloat(document.getElementById('withAmt').value);
                let dest = document.getElementById('withDest').value;
                
                if(!amt || !dest) return alert("Z…ôhm…ôt olmasa b√ºt√ºn xanalarƒ± doldurun!");
                if(amt < MIN_WITHDRAWAL) return alert(`Minimum √ßƒ±xarƒ±≈ü m…ôbl…ôƒüi ${MIN_WITHDRAWAL} AZN-dir!`);
                if(user.balance < amt) return alert("‚ö†Ô∏è Balansƒ±nƒ±zda kifay…ôt q…ôd…ôr v…ôsait yoxdur!");
                
                // --- BALANSI DERHAL AZALDIRIQ (Double Spend Prevention) ---
                user.balance -= amt;
                save(); // Yeni balansƒ± yadda≈üa yazƒ±r v…ô ekranda yenil…ôyir
                
                // Send withdrawal request to Sheet
                fetch(`${API}?action=withdraw&name=${encodeURIComponent(user.name)}&amount=${amt}&dest=${dest}`, {mode: 'no-cors'});
                
                // WA Integration
                let msg = `Salam, Pul √ßƒ±xarmaq ist…ôyir…ôm.\nüë§ ID: ${user.name}\nüí∞ M…ôbl…ôƒü: ${amt} AZN\nüí≥ Hesab: ${dest}`;
                wa(msg);
                
                alert("√áƒ±xarƒ±≈ü sorƒüusu q…ôbul olundu! Balansdan silindi. WhatsApp-a y√∂nl…ôndirilirsiniz...");
            }
            document.getElementById('cashierModal').style.display='none';
        }

        // GAME LOGIC
        let mPlay=false, mMult=1.0, mBet=10, mStep=0;
        function adjBetM(v){ let e=document.getElementById('mBet'); let val=parseInt(e.value)+v; if(val<1)val=1; e.value=val; }
        function initMines(){ const g=document.getElementById('mGrid'); g.innerHTML=""; for(let i=0;i<25;i++){ let d=document.createElement('div'); d.className='tile'; d.id='mt'+i; d.onclick=()=>mHit(i); g.appendChild(d); }}
        function minePlay(){
            mBet=parseInt(document.getElementById('mBet').value); 
            if(!checkBal(mBet)) return; 
            user.balance-=mBet; save(); mPlay=true; mMult=1.0; mStep=0;
            document.getElementById('mpBtn').style.display='none'; document.getElementById('mcBtn').style.display='none'; 
            document.getElementById('mMsg').innerText="PICK MINIMUM 3 TILES!"; document.getElementById('mMsg').style.color="white"; initMines(); 
        }
        function mHit(i){
            if(!mPlay) return; let t=document.getElementById('mt'+i); if(t.classList.contains('open')) return;
            let isBomb = (mStep < 2) ? (Math.random()<0.1) : (Math.random()<0.9);
            t.classList.add('open');
            if(isBomb){
                t.classList.add('bomb'); t.innerHTML="üí£"; mPlay=false; document.getElementById('mMsg').innerText="BOOM!"; document.getElementById('mMsg').style.color="#ef4444"; setTimeout(mReset,2000);
            } else {
                t.classList.add('gem'); t.innerHTML="üíé"; mStep++; mMult*=1.25;
                if(mStep>=3){ document.getElementById('mcBtn').style.display='block'; document.getElementById('mcBtn').innerText=`TAKE CASH (${(mBet*mMult).toFixed(2)})`; document.getElementById('mMsg').innerText="CONTINUE OR TAKE?"; document.getElementById('mMsg').style.color="#10b981"; } else { document.getElementById('mMsg').innerText=`${3-mStep} MORE TILES...`; }
            }
        }
        function mineCash(){ if(!mPlay || mStep<3) return; let w=mBet*mMult; user.balance+=w; save(); sendWin(w.toFixed(2)); mPlay=false; launchConfetti(); document.getElementById('mMsg').innerText=`YOU WON: ${w.toFixed(2)}`; mReset(); }
        function mReset(){ document.getElementById('mpBtn').style.display='block'; document.getElementById('mcBtn').style.display='none'; }

        let jPlay=false, jMult=1.0, jAnim;
        function adjBet(v){ let e=document.getElementById('jetBet'); let val=parseInt(e.value)+v; if(val<1)val=1; e.value=val; }
        function initCanvas(){ const c=document.getElementById('cvs'); c.width=c.parentElement.offsetWidth; c.height=c.parentElement.offsetHeight; c.getContext('2d').clearRect(0,0,c.width,c.height); }
        function jetPlay(){
            let b=parseInt(document.getElementById('jetBet').value); 
            if(!checkBal(b)) return;
            user.balance-=b; save(); jPlay=true; jMult=1.0; let st=Date.now();
            document.getElementById('jpBtn').style.display='none'; document.getElementById('jcBtn').style.display='block';
            let cr = Math.random()<0.7 ? 1.0+Math.random()*0.3 : 1.5+Math.random()*2;
            function loop(){
                if(!jPlay)return; let t=(Date.now()-st)/1000; jMult=1.0+(t*t*0.1);
                document.getElementById('jm').innerText=jMult.toFixed(2)+"x";
                const c=document.getElementById('cvs'), x=c.getContext('2d'); x.clearRect(0,0,c.width,c.height);
                let px=Math.min(c.width-50, t*100), py=c.height-Math.min(c.height-50, (jMult-1)*150);
                x.beginPath(); x.lineWidth=4; x.strokeStyle="#facc15"; x.moveTo(0,c.height); x.quadraticCurveTo(px/2,c.height,px,py); x.stroke();
                x.font="30px Arial"; x.fillText("üöÄ",px-20,py);
                if(jMult>=cr){ jPlay=false; document.getElementById('jm').style.color="red"; document.getElementById('jm').innerText="CRASHED"; setTimeout(jetReset,2000); } else jAnim=requestAnimationFrame(loop);
            } loop();
        }
        function jetCash(){ if(!jPlay)return; jPlay=false; cancelAnimationFrame(jAnim); let w=parseInt(document.getElementById('jetBet').value)*jMult; user.balance+=w; save(); sendWin(w.toFixed(2)); launchConfetti(); document.getElementById('jm').style.color="#10b981"; document.getElementById('jm').innerText=`WIN ${w.toFixed(2)}`; setTimeout(jetReset,2000); }
        function jetReset(){ document.getElementById('jpBtn').style.display='block'; document.getElementById('jcBtn').style.display='none'; document.getElementById('jm').style.color="white"; document.getElementById('jm').innerText="1.00x"; initCanvas(); }

        function adjBetS(v){ let e=document.getElementById('sBet'); let val=parseInt(e.value)+v; if(val<1)val=1; e.value=val; }
        function slotSpin(){
            let b=parseInt(document.getElementById('sBet').value); 
            if(!checkBal(b)) return;
            user.balance-=b; save();
            setTimeout(()=>{ document.getElementById('r1').innerText="üçí"; document.getElementById('r2').innerText="üçã"; document.getElementById('r3').innerText="üçá"; document.getElementById('sMsg').innerText="YOU LOST"; },1000);
        }

        window.onresize=()=>{ if(document.getElementById('viewJet').classList.contains('active')) initCanvas(); }
    </script>
</body>
</html>
